function s(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace(/Rp\s/g,"")}$.ajax({type:"GET",url:"/home/income",dataType:"json",success:function(a){const e=$(".myChart");let l=a.result.map(t=>t.nama_sales),n=a.result.map(t=>t.total_pendapatan);a.result.map(t=>t.total_barang),new Chart(e,{type:"pie",data:{labels:l,datasets:[{label:"Pendapatan",data:n,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(75, 192, 192)"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{tooltip:{callbacks:{label:function(t){const i=t.raw;return`Pendapatan: Rp ${s(i.toLocaleString())}`}}}}}})}});$(document).on("change",".filter_month",function(a){a.preventDefault();let e=$(this).val();e==""?$("#tabel_penjualan").load("/home/penjualan/unit?query="+e,function(l){window.history.pushState({},"","/home"),$(this).html(l.table),$(".pagination").html(l.pagination)}):$("#tabel_penjualan").load("/home/penjualan/unit?query="+e,function(l){$(this).html(l.table),$(".pagination").html(l.pagination)})});$(document).on("input","#sales_keyword",function(a){a.preventDefault();let e=$(this).val(),l=$('meta[name="csrf-token"]').attr("content"),n;e?n="/home/search":n="/penjualan/filter",$.ajax({type:"GET",url:n,data:{salesQuery:e,_token:l,sales:10},success:function(t){e?($("tbody#tabel_penjualan").html(t.table),$(".pagination-wrapper-home").html(t.pagination),$("#info-home-page").html(`Menampilkan <b>${t.info.firstItem??0}</b> sampai <b>${t.info.lastItem??0}</b> dari <b>${t.info.total??0}</b> item`),$("tbody#tabel_penjualan .nama_sales,.nama-barang, .tipe-barang").each(function(){let i=$(this).text();if(e){let o=new RegExp("("+e+")","gi"),r=i.replace(o,'<span class="highlight">$1</span>');$(this).html(r)}else $(this).html(i)})):($("tbody#tabel_penjualan").html(t.table),$(".pagination-wrapper-home").html(t.pagination),$("#info-home-page").html(`Menampilkan <b>${t.info.firstItem??0}</b> sampai <b>${t.info.lastItem??0}</b> dari <b>${t.info.total??0}</b> item`))}})});$(document).on("change","#filter_penjualan",function(a){a.preventDefault();let e=$(this).val(),l=$('meta[name="csrf-token"]').attr("content");$.ajax({type:"GET",url:"/penjualan/filter",data:{sales:e,_token:l},success:function(n){$("tbody#tabel_penjualan").html(n.table),$(".pagination-wrapper-home").html(n.pagination),$("#info-home-page").html(`Menampilkan <b>${n.info.firstItem??0}</b> sampai <b>${n.info.lastItem??0}</b> dari <b>${n.info.total??0}</b> item`)}})});$(document).on("click",".pagination a",function(a){a.preventDefault();let e=$(this).attr("href"),l=$("#filter_penjualan").val();e=new URL(e),e.searchParams.set("sales",l),$.ajax({url:e.toString(),type:"GET",success:function(n){$("tbody#tabel_penjualan").html(n.table),$(".pagination-wrapper-home").html(n.pagination),$("#info-home-page").html(`Menampilkan <b>${n.info.firstItem??0}</b> sampai <b>${n.info.lastItem??0}</b> dari <b>${n.info.total??0}</b> item`)}})});$("#filter_penjualan").val(10).trigger("change");
