function o(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace(/Rp\s/g,"")}$(document).on("input","#sales_keyword",function(a){a.preventDefault();let e=$(this).val();e===""?$("#tabel_penjualan").load(`/home/search?query=${e}`,function(){window.history.pushState({},"","/home")}):$("#tabel_penjualan").load("/home/search?query="+e,function(){$("#tabel_penjualan .nama_sales,.nama-barang, .tipe-barang").each(function(){let t=$(this).text();if(e){let l=new RegExp("("+e+")","gi"),n=t.replace(l,'<span class="highlight">$1</span>');$(this).html(n)}else $(this).html(t)})})});$.ajax({type:"GET",url:"/home/income",dataType:"json",success:function(a){const e=$(".myChart");let t=a.result.map(n=>n.nama_sales),l=a.result.map(n=>n.total_pendapatan);a.result.map(n=>n.total_barang),new Chart(e,{type:"pie",data:{labels:t,datasets:[{label:"Pendapatan",data:l,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(75, 192, 192)"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{tooltip:{callbacks:{label:function(n){const i=n.raw;return`Pendapatan: Rp ${o(i.toLocaleString())}`}}}}}})}});$(document).on("change",".filter_month",function(a){a.preventDefault();let e=$(this).val();e==""?$("#tabel_penjualan").load("/home/penjualan/unit?query="+e,function(t){window.history.pushState({},"","/home"),$(this).html(t.table),$(".pagination").html(t.pagination)}):$("#tabel_penjualan").load("/home/penjualan/unit?query="+e,function(t){$(this).html(t.table),$(".pagination").html(t.pagination)})});
