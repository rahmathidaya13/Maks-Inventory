function r(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace(/Rp\s/g,"")}$(document).on("keyup","#sales_keyword",function(a){a.preventDefault();let t=$(this).val().trim();t===""?$("#tabel_penjualan").load(`/home/search?query=${encodeURIComponent(t)}`,function(){window.history.pushState({},"","/home")}):$("#tabel_penjualan").load("/home/search?query="+encodeURIComponent(t),function(){$("#tabel_penjualan .nama_sales,.nama-barang, .tipe-barang").each(function(){let n=$(this).text();if(t){let e=new RegExp("("+t+")","gi"),l=n.replace(e,'<span class="highlight">$1</span>');$(this).html(l)}else $(this).html(n)})})});$.ajax({type:"GET",url:"/home/income",dataType:"json",success:function(a){let t=a.result.map(e=>e.nama_sales),n=a.result.map(e=>e.total_pendapatan);a.result.map(e=>e.total_barang),new Chart($(".myChart"),{type:"pie",data:{labels:t,datasets:[{label:"Pendapatan",data:n,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(75, 192, 192)"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{tooltip:{callbacks:{label:function(e){const l=e.raw;return`Pendapatan: Rp ${r(l.toLocaleString())}`}}}}}})}});
